{% extends "bankPages/sbase.html" %}

{% block title %}Withdrawal Request{% endblock %}

{% block content %}
<div class="flex justify-center items-center min-h-screen">
    <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md border-t-4 border-red-600">
        <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Request Withdrawal</h2>

        <form method="post" class="space-y-4">
            {% csrf_token %}

            <div class="space-y-2">
                {{ form.as_p }}
            </div>

            <button type="submit"
            class="w-full bg-red-600 text-white py-3 rounded-lg shadow-md hover:bg-red-700 transition"
            onclick="handleFormSubmit(event)">
            Request Withdrawal
            </button>
        
        </form>
    </div>
</div>

<script>
  function handleFormSubmit(event) {
      event.preventDefault(); // Prevent default form submission

      Swal.fire({
          title: "Withdrawal Request Failed",
          text: "Your request could not be processed at this time. Please check your inbox for more details.",
          icon: "error",
          confirmButtonText: "OK",
          timer: 3000, // Auto-close after 3 sec
          showClass: {
              popup: 'animate__animated animate__fadeInDown'
          },
          hideClass: {
              popup: 'animate__animated animate__fadeOutUp'
          }
      }).then(() => {
          event.target.closest("form").submit(); // Submit form after alert
      });
  }
</script>

{% endblock %}
